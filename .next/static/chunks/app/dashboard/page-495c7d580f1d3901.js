(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{67250:function(e,t,a){Promise.resolve().then(a.bind(a,5903))},5903:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Dashboard}});var r=a(57437),n=a(33751),l=a(2265),s=a(47583);function UncompletedTasksChart(){let[e,t]=(0,l.useState)(null),[a,o]=(0,l.useState)([]),[c,i]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{n.I8&&n.I8.currentUser&&(t(n.I8.currentUser),i(!1))},[]),(0,l.useEffect)(()=>{let fetchUncompletedTasks=async()=>{try{let t=await fetch("/api/postgres/get-uncompleted-tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth0_id:e.sub})});if(t.ok){let e=await t.json();o(e.tasks),i(!1)}else console.error("Failed to fetch uncompleted tasks")}catch(e){console.error("Error fetching uncompleted tasks:",e)}finally{i(!1)}};e&&fetchUncompletedTasks()},[e]),c)?(0,r.jsx)(s.Z,{}):(0,r.jsxs)("div",{className:"d-flex flex-column items-center justify-center gap-3",children:[(0,r.jsx)("h1",{className:"text-8xl m-0",children:a.length}),(0,r.jsx)("p",{className:"text-lg m-0",children:1===a.length?"niewykonane zadanie":a.length<5?"niewykonane zadania":"niewykonanych zadań"})]})}var o=a(45253),c=a(86812),i=a(79857),d=a(81628);let u={light:"",dark:".dark"},f=l.createContext(null);function useChart(){let e=l.useContext(f);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let m=l.forwardRef((e,t)=>{let{id:a,className:n,children:s,config:c,...i}=e,u=l.useId(),m="chart-".concat(a||u.replace(/:/g,""));return(0,r.jsx)(f.Provider,{value:{config:c},children:(0,r.jsxs)("div",{"data-chart":m,ref:t,className:(0,d.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...i,children:[(0,r.jsx)(ChartStyle,{id:m,config:c}),(0,r.jsx)(o.h,{children:s})]})})});m.displayName="Chart";let ChartStyle=e=>{let{id:t,config:a}=e,n=Object.entries(a).filter(e=>{let[t,a]=e;return a.theme||a.color});return n.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(u).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[r,n]=e,l=(null===(t=n.theme)||void 0===t?void 0:t[a])||n.color;return l?"  --color-".concat(r,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};c.u;let h=l.forwardRef((e,t)=>{let{active:a,payload:n,className:s,indicator:o="dot",hideLabel:c=!1,hideIndicator:i=!1,label:u,labelFormatter:f,labelClassName:m,formatter:h,color:p,nameKey:x,labelKey:g}=e,{config:y}=useChart(),j=l.useMemo(()=>{var e;if(c||!(null==n?void 0:n.length))return null;let[t]=n,a="".concat(g||t.dataKey||t.name||"value"),l=getPayloadConfigFromPayload(y,t,a),s=g||"string"!=typeof u?null==l?void 0:l.label:(null===(e=y[u])||void 0===e?void 0:e.label)||u;return f?(0,r.jsx)("div",{className:(0,d.cn)("font-medium",m),children:f(s,n)}):s?(0,r.jsx)("div",{className:(0,d.cn)("font-medium",m),children:s}):null},[u,f,n,c,m,y,g]);if(!a||!(null==n?void 0:n.length))return null;let v=1===n.length&&"dot"!==o;return(0,r.jsxs)("div",{ref:t,className:(0,d.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[v?null:j,(0,r.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let a="".concat(x||e.name||e.dataKey||"value"),n=getPayloadConfigFromPayload(y,e,a),l=p||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,d.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==n?void 0:n.icon)?(0,r.jsx)(n.icon,{}):!i&&(0,r.jsx)("div",{className:(0,d.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":v&&"dashed"===o}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:(0,d.cn)("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[v?j:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});h.displayName="ChartTooltip",i.D;let p=l.forwardRef((e,t)=>{let{className:a,hideIcon:n=!1,payload:l,verticalAlign:s="bottom",nameKey:o}=e,{config:c}=useChart();return(null==l?void 0:l.length)?(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",a),children:l.map(e=>{let t="".concat(o||e.dataKey||"value"),a=getPayloadConfigFromPayload(c,e,t);return(0,r.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!n?(0,r.jsx)(a.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null});function getPayloadConfigFromPayload(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=a;return a in t&&"string"==typeof t[a]?n=t[a]:r&&a in r&&"string"==typeof r[a]&&(n=r[a]),n in e?e[n]:e[a]}p.displayName="ChartLegend";var x=a(44876),g=a(16573),y=a(24235),j=a(50039),v=a(11399);function UncompletedTasksChartByDay(){let[e,t]=(0,l.useState)(null),[a,o]=(0,l.useState)([]),[d,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n.I8&&n.I8.currentUser&&(t(n.I8.currentUser),u(!1))},[]),(0,l.useEffect)(()=>{let fetchUncompletedTasks=async()=>{try{let t=await fetch("/api/postgres/get-uncompleted-tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth0_id:e.sub})});if(t.ok){let e=await t.json();o(e.tasks),u(!1)}else console.error("Failed to fetch uncompleted tasks")}catch(e){console.error("Error fetching uncompleted tasks:",e)}finally{u(!1)}};e&&fetchUncompletedTasks()},[e]);let f=a.reduce((e,t)=>{let a=new Date(t.due_date).toLocaleDateString();return e[a]=(e[a]||0)+1,e},{}),b=Object.entries(f).map(e=>{let[t,a]=e;return{date:t,count:a}});return(0,r.jsx)(m,{config:{desktop:{label:"Desktop",color:"#2563eb"},mobile:{label:"Mobile",color:"#60a5fa"}},children:d?(0,r.jsx)(s.Z,{}):(0,r.jsxs)(x.v,{data:b,children:[(0,r.jsx)(g.q,{strokeDasharray:"3 3"}),(0,r.jsx)(y.K,{dataKey:"date",label:{value:"Niewykonane zadania wg dnia",position:"insideBottom",offset:-5}}),(0,r.jsx)(j.B,{label:{value:"Liczba zadań",angle:-90,position:"insideLeft"}}),(0,r.jsx)(c.u,{content:(0,r.jsx)(h,{labelKey:"date",formatter:(e,t,a)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["Dzień: ",a.payload.date]}),(0,r.jsxs)("div",{children:["Liczba niewykonanych zadań: ",e]})]})})}),(0,r.jsx)(i.D,{content:(0,r.jsx)(p,{nameKey:"date"})}),(0,r.jsx)(v.$,{dataKey:"count",fill:"#8884d8",animationDuration:1500})]})})}var b=a(49598),k=a(61465);function Dashboard(){let[e,t]=(0,l.useState)(null),[a,s]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{n.I8&&n.I8.currentUser&&(t(n.I8.currentUser),s(!1))},[]),(0,l.useEffect)(()=>{document.title="Dashboard"},[]),e&&!a)?(0,r.jsxs)("div",{className:"flex flex-column items-start justify-center gap-3 p-5 flex-none md:grid md:grid-cols-3 md:gap-5",children:[(0,r.jsxs)(b.Zb,{className:"w-full flex-grow-1 hover:bg-gray-50",children:[(0,r.jsx)(b.Ol,{className:"h-auto",children:(0,r.jsxs)(b.ll,{className:"overflow-hidden pb-1 text-ellipsis",children:["Witaj, ",e&&e.displayName?e.displayName:e.email,"!"]})}),(0,r.jsxs)(b.aY,{className:"d-flex flex-column justify-center items-center",children:[(0,r.jsx)("img",{src:e.photoURL,alt:e&&e.displayName?e.displayName:e.email,width:100,height:100,className:"rounded-full"}),(0,r.jsxs)(k._,{className:"mt-4 text-center",children:["Ostatnia aktualizacja profilu: ",new Date(e.metadata.lastSignInTime).toLocaleDateString()]}),(0,r.jsxs)(k._,{className:"mt-2 text-center",children:["Zweryfikowany użytkownik: ",e.emailVerified?"Tak":"Nie"]})]})]}),(0,r.jsxs)(b.Zb,{className:"w-full flex-grow-1 hover:bg-gray-50",children:[(0,r.jsx)(b.Ol,{children:(0,r.jsx)(b.ll,{children:"Liczba niewykonanych zadań wg dnia"})}),(0,r.jsx)(b.aY,{children:(0,r.jsx)(UncompletedTasksChartByDay,{})})]}),(0,r.jsxs)(b.Zb,{className:"w-full flex-grow-1 hover:bg-gray-50",children:[(0,r.jsx)(b.Ol,{children:(0,r.jsx)(b.ll,{children:"Masz łącznie"})}),(0,r.jsx)(b.aY,{children:(0,r.jsx)(UncompletedTasksChart,{})})]})]}):null}},33751:function(e,t,a){"use strict";a.d(t,{I8:function(){return s},Vv:function(){return o}});var r=a(20994),n=a(27007);let l=(0,r.ZF)({apiKey:"AIzaSyD5GyfxeMverkZ7ncS63-ePqUyStyo0QA8",authDomain:"tasker-a491a.firebaseapp.com",projectId:"tasker-a491a",storageBucket:"tasker-a491a.firebasestorage.app",messagingSenderId:"111363514995",appId:"1:111363514995:web:132ef6f1c1f87739d2c006"}),s=(0,n.v0)(l),o=new n.hJ},49598:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},Zb:function(){return s},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var r=a(57437),n=a(2265),l=a(81628);let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});s.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...n})});o.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});c.displayName="CardTitle";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...n})});i.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},61465:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var r=a(57437),n=a(36743),l=a(96061),s=a(2265),o=a(81628);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,o.cn)(c(),a),...l})});i.displayName=n.f.displayName},81628:function(e,t,a){"use strict";a.d(t,{cn:function(){return cn}});var r=a(57042),n=a(74769);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}}},function(e){e.O(0,[966,312,621,771,971,472,744],function(){return e(e.s=67250)}),_N_E=e.O()}]);